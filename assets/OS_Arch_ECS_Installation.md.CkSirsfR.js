import{$ as s,U as a,S as i,as as n}from"./chunks/framework.BXaA7olX.js";const u=JSON.parse('{"title":" 云服务器安装 ArchLinux","description":"","frontmatter":{},"headers":[],"relativePath":"OS/Arch/ECS/Installation.md","filePath":"OS/Arch/ECS/Installation.md","lastUpdated":1704180282000}'),e={name:"OS/Arch/ECS/Installation.md"},t=n(`<h1 id="-云服务器安装-archlinux" tabindex="-1"> 云服务器安装 ArchLinux <a class="header-anchor" href="#-云服务器安装-archlinux" aria-label="Permalink to &quot; 云服务器安装 ArchLinux&quot;">​</a></h1><h2 id="-检查存储空间和内存大小" tabindex="-1"> 检查存储空间和内存大小 <a class="header-anchor" href="#-检查存储空间和内存大小" aria-label="Permalink to &quot; 检查存储空间和内存大小&quot;">​</a></h2><p>使用此方法前请确保根分区剩余空间大于 3G 且磁盘大小大于等于 20G，否则可能无法安装成功。</p><p>服务器的硬盘和存储空间剩余大小可以通过以下命令查看:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">df</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 输出格式如下所示:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Filesystem      Size  Used Avail Use% Mounted on</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># udev            965M     0  965M   0% /dev</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># tmpfs           200M  8.9M  191M   5% /run</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># /dev/vda1        40G   16G   22G  42% /</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># tmpfs           997M   88K  997M   1% /dev/shm</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># tmpfs           5.0M  4.0K  5.0M   1% /run/lock</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># tmpfs           997M     0  997M   0% /sys/fs/cgroup</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># tmpfs           200M     0  200M   0% /run/user/0</span></span></code></pre></div><p>服务器的内存大小可以通过以下命令查看:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">free</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 输出格式如下所示:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#         total   used    free    shared  buff/cache  available</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Mem:    1.9G    683M    269M    36M         1.0G        1.1G</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Swap:   1.0G    138M    886M</span></span></code></pre></div><h2 id="-下载镜像文件" tabindex="-1"> 下载镜像文件 <a class="header-anchor" href="#-下载镜像文件" aria-label="Permalink to &quot; 下载镜像文件&quot;">​</a></h2><p>我们可以通过官方网站下载镜像文件，也可以使用国内的镜像站下载最新的镜像文件。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 此处使用的是 tuna 镜像站，如果需要使用其他镜像站，请根据实际情况修改。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://mirrors.tuna.tsinghua.edu.cn/archlinux/iso/latest/arch</span></span></code></pre></div><h2 id="挂载-iso-镜像文件" tabindex="-1">挂载 <code>ISO</code> 镜像文件 <a class="header-anchor" href="#挂载-iso-镜像文件" aria-label="Permalink to &quot;挂载 \`ISO\` 镜像文件&quot;">​</a></h2><p>我们可以将 <code>ISO</code> 镜像文件挂载到 <code>/mnt</code> 目录下，然后将其中的内容复制到根目录下，这样就可以在下次启动时通过指定命令行启动参数来启动 Arch Linux 安装镜像了。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> loop,ro</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> archlinux-x86_64.iso</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">umount</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">e2label</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/vda1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> archiso</span></span></code></pre></div><p>值得注意的是，请确保你使用 <code>Grub</code> 来进行系统启动，而不是 <code>systemd-boot</code>。</p><h2 id="配置-grub-启动" tabindex="-1">配置 <code>Grub</code> 启动 <a class="header-anchor" href="#配置-grub-启动" aria-label="Permalink to &quot;配置 \`Grub\` 启动&quot;">​</a></h2><p>这一步中，我们需要重启服务器，请确保您可以看到重启的界面，通常大部分服务商会提供 VNC 远程连接的方式使我们可以看到服务器的重启界面。</p><p>重启到 <code>Grub</code> 选择菜单界面，然后按 <code>C</code> 进入 <code>Grub</code> 命令行界面。</p><p>首先输入如下指令:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 列出根目录的所有文件如果能看到arch，则可以继续安装</span></span></code></pre></div><p>请确保运行上述指令后，列出的文件(夹)能看到 <code>arch</code>，否则则需要重新挂载镜像并复制文件到根目录下。</p><p>确认无误后，接下来我们需要配置启动的 <code>Linux</code> 内核以及 <code>initramfs</code>，指令如下:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定 Linux 内核</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">linux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /arch/boot/x86_64/vmlinuz-linux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> archisobasedir=arch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> archisolabel=archiso</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> copytoram</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定 initramfs</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initrd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /arch/boot/x86_64/initramfs-linux.img</span></span></code></pre></div><p>随后，确认启动 <code>archlinux iso</code> 镜像，指令如下:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>boot</span></span></code></pre></div><p>如果你看到了 <code>Welcome to Arch Linux</code> 字样，那么就可以按照正常 <code>Arch Linux</code> 安装流程进行 <a href="/OS/Arch/Installation">Arch Linux 的安装</a>了，别忘记开启 <code>ssh</code> 服务，启动指令如下:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>systemctl start sshd</span></span></code></pre></div><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><ul><li><a href="https://senge.dev/index.php/arch-ecs/" target="_blank" rel="noreferrer">云服务器安装 Arch Linux</a></li></ul>`,28),l=[t];function h(p,d,c,r,o,k){return i(),a("div",null,l)}const F=s(e,[["render",h]]);export{u as __pageData,F as default};
