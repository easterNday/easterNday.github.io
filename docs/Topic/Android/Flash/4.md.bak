# 小米设备从零开始刷机 Vol.4
+ 制作人员：文鸯、星随梦能、红豆、suda_code、东方怂天、简停云
+ 发起人：文鸯
+ 最后编辑时间：23/06/15
+ 未经允许请勿将本稿件分享至飞书外部。
> 当存在此引导段落时，则为备注说明，请后期与配音留意。

---
# 前言
欢迎回来，这里是《从零开始》第四章，本章将教你如何安装TWRP，结合上一章节的ADB指令，跟随视频一起操作吧。

---
# 四、安装TWRP
+ 难度等级：√(4)
+ 数据等级：2
+ 危险等级：3
## 前言
这是原版的Recovery，功能阉割、限制，无法使用更多功能来维护修复设备，那么我们需要刷入第三方Recovery来提升使用体验。

+ 本期的进展将以：获取TWRP、安装TWRP、完成。

---
## 获取TWRP
目前的第三方Recovery有很多选择，目前主流两类是:"TWRP"、"橙狐"，本期将以TWRP进行教程示例。
+ 获取链接：
1. TWRP官方
2. 酷安Mi_Block（skkk）
3. 其它维护（可在GitHub、酷安搜索）

+ 其中，"Mi_Block"作者维护的TWRP可在FlashCorpa下载站中获取，原链接与FlashCorpa下载站链接将会放置视频简介。

---
## 安装TWRP
我们在上一章教程中学习到了分区架构的知识，由于不同的分区架构存在差异性，所以刷入方式也不同，我们需要按照实际设备来选择刷入方式。

---
### 准备工作
1. 将下载好的TWRP镜像解压至桌面。
2. 打开ADB终端。
3. 手机长按电源键关机，关机后按住电源键和音量下键，当设备亮起，松开电源键，长按音量下键，直至设备进入FASTBOOT模式，FASTBOOT模式中，设备屏幕会显示橙色字体的FASTBOOT字样，旧设备会显示米兔修理图标。设备进入FASTBOOT后，通过数据线形式链接你的电脑设备。

---
### A Only
在小米10以及之前的所有机型均为 A Only架构 这类分区架构的刷入方法极为简单。
+ 由于A only机型的Recovery在Recovery分区中，我们可以直接将镜像刷入Recovery分区。
+ 我们将使用上一章教学的ADB指令“fastboot flash”进行操作，在ADB终端输入指令。
+ fastboot flash recovery 镜像路径
+ 其中，fastboot是运行指令；flash是执行指令；recovery是需要刷入的镜像分区；镜像路径是需要刷入的镜像位置，镜像路径可以直接将镜像拖拽进终端，它会自动填充。

刷入完毕后，它会自动重启至TWRP，若未重启，可以按住电源键和音量上键，当设备亮起，松开电源键，长按音量上键，直至设备进入Recovery模式。

---
### vA/B
在小米11以及之后的所有机型均为 vA/B架构 这类分区架构的刷入方法略微复杂。
+ 由于vA/B机型的Recovery合并在Boot分区中，我们需要先进行临时启动。
+ 我们将使用上一章教学的ADB指令“fastboot boot”进行操作，在ADB终端输入指令。
+ fastboot boot 镜像路径
+ 其中，fastboot是运行指令；boot是执行指令；镜像路径是需要临时启动的镜像位置，镜像路径可以直接将镜像拖拽进终端，它会自动填充。
+ 执行命令后，手机会自动重启至TWRP，随后依次点击高级、刷入当前TWRP、滑动模块安装。

刷入完毕后，你需要重启TWRP查看安装状态，按住电源键和音量上键，当设备亮起，松开电源键，长按音量上键，直至设备进入Recovery模式。

---
### vA/B 骁龙8机型
在骁龙8以及之后的所有机型中 恢复了Recovery分区 这类分区架构的刷入方法极为简单。
+ 由于骁龙8机型恢复了Recovery分区，我们可以直接将镜像刷入Recovery分区。
+ 我们将使用上一章教学的ADB指令“fastboot flash”进行操作，在ADB终端输入指令。
+ fastboot flash recovery_ab 镜像路径
+ 其中，fastboot是运行指令；flash是执行指令；recovery_ab是需要刷入的镜像分区；镜像路径是需要刷入的镜像位置，镜像路径可以直接将镜像拖拽进终端，它会自动填充。
+ **注意，指令必须刷入recovery_ab或分开刷入recovery_a和recovery_b，直接刷入recovery可能会导致设备开机出现坏损提醒，虽然并不会导致设备损坏，但是这个提醒会令人反感。**
+ **注意，骁龙8及更新机型刷入的TWRP安卓版本必须与操作系统的安卓版本一致；例如操作系统是Android13，TWRP版本必须是Android13。**

刷入完毕后，它会自动重启至TWRP，若未重启，可以按住电源键和音量上键，当设备亮起，松开电源键，长按音量上键，直至设备进入Recovery模式。

---
## 手机安装
如果你的设备已经存在Root，你可以通过Root权限进行安装操作。

---
### A Only
通过镜像刷写工具进行安装，例如：爱玩机工具箱、搞机助手等含有镜像刷写功能的软件。
+ 由于A only机型的Recovery在Recovery分区中，我们可以直接将镜像刷入Recovery分区。
+ 在镜像工具中找到“Recovery“分区，点击后选择镜像，点击安装即可。

刷入完毕后，可重启至TWRP，若未重启，可以按住电源键和音量上键，当设备亮起，松开电源键，长按音量上键，直至设备进入Recovery模式。

---
### vA/B
通过vA/B专用刷写工具进行安装，例如：多系统工具箱等含有vA/B专用刷写功能的软件。
+ 由于vA/B机型的Recovery合并在Boot分区中，我们需要特殊安装。
+ 在镜像工具中找到“AB/VAB机型永久安装twrp“点击后选择镜像，点击安装即可。

刷入完毕后，可重启至TWRP，若未重启，可以按住电源键和音量上键，当设备亮起，松开电源键，长按音量上键，直至设备进入Recovery模式。

---
### vA/B 骁龙8机型
过镜像刷写工具进行安装，例如：爱玩机工具箱、搞机助手等含有镜像刷写功能的软件。
+ 由于A only机型的Recovery在Recovery分区中，我们可以直接将镜像刷入Recovery分区。
+ 在镜像工具中找到“Recovery_a“分区，点击后选择镜像，点击安装，随后在镜像工具中找到“Recovery_b“分区，点击后选择镜像，点击安装即可。
+ **注意，骁龙8及更新机型刷入的TWRP安卓版本必须与操作系统的安卓版本一致；例如操作系统是Android13，TWRP版本必须是Android13。**

刷入完毕后，可重启至TWRP，若未重启，可以按住电源键和音量上键，当设备亮起，松开电源键，长按音量上键，直至设备进入Recovery模式

---
## 问题
1. 电脑设备检测不到手机设备
+ 在链接情况下，在电脑中鼠标右键此电脑、管理、设备管理，查看设备连接状态。若存在Android但有黄色叹号，证明驱动未安装，若无手机设备存在，请更换数据线或USB端口。
2. 镜像前边的标签是什么意思？
+ [Rec]代表可直接刷入Recovery分区或Recovery_a/Recovery_b分区。
+ [Boot]代表需要通过临时启动法进行安装。
+ [Rec/Boot]代表可刷入Recovery也可通过临时启动法安装。
3. 为什么我输入“fastboot flash recovery_ab"报错
+ fastboot版本太久，不支持此指令，需要分开刷“fastboot flash recovery_a";"recovery_b"。

---
# 结尾
本分段制作人员：
策划：星随梦能
技术：文鸯、东方怂天
审核：阿假、狗和谐记、简停云
文稿：文鸯
后期：归梦瑶
配音：星随梦能
后勤：suda_code

无论何时，请保管数据，请开始下一阶段的学习。

---
